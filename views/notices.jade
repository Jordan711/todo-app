extends layout

block content
  h1= title
  hr
  h2 Add New Notice
  form#noticeForm(action="/notices/add", method="POST", autocomplete="off")
    div
      label Name: 
      input(type="text", name="name", required)
    div
      label Message: 
      textarea(name="message", style="width: 100%; height: 100px;", required)
    button(type="submit") Create Notice

  script.
    document.getElementById('noticeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const formData = new URLSearchParams(new FormData(form));
      
      await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        }
      });
      
      window.location.replace('/notices');
    });

  hr
  h2 Notice List
  if notices.length === 0
    p No notices found.
  each notice in notices
    p #[strong Name:] #{notice.name}
    p #[strong Date Posted:] #{notice.created_at}
    p #[strong Message:] #{notice.message}
    hr